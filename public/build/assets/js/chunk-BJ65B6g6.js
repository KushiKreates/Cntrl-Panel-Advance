import{a}from"./chunk-CpaldM2f.js";import{i as o,t as s}from"../main-Cuy6vPL_.js";class n{constructor(){this.client=a.create({baseURL:"",withCredentials:!0,headers:{Accept:"application/json","X-CSRF-TOKEN":window.Laravel.csrfToken,"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>(o.start(),e)),this.client.interceptors.response.use(e=>(o.done(),e),e=>(o.done(),e.response?.status===401?(console.error("Unauthorized access"),s.error("Unauthorized access, please log in again.")):e.response?.status===419?(s.error("Session expired,Automatic refershing started."),console.error("CSRF token mismatch, refreshing page"),window.location.reload()):console.error("API Error:",e.response?.data||e.message),Promise.reject(e)))}async request(e){try{const t=await this.client.request(e);return t.status>=200&&t.status<300?t.data.success===!1&&s.error("Your request failed: "+(t.data.message||"Unknown error")):s.error(`Error: ${t.status} - ${t.statusText}`),t.data}catch(t){throw console.error("Request failed:",e.url),t}}get(e,t){return this.request({...t,method:"get",url:e})}post(e,t,r){return this.request({...r,method:"post",url:e,data:t})}patch(e,t,r){return this.request({...r,method:"patch",url:e,data:t})}put(e,t,r){return this.request({...r,method:"put",url:e,data:t})}delete(e,t){return this.request({...t,method:"delete",url:e})}}const l=new n;export{l as H};
