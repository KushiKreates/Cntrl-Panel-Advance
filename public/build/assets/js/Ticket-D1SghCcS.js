import{r as m,m as x,j as e}from"./chunk-D2CLwLgv.js";import{H as i}from"./chunk-BJ65B6g6.js";import{A as p}from"./chunk-DsuNDbqi.js";import{a as g}from"./chunk-CpaldM2f.js";import{C as u,b as j,a as h}from"./chunk-gkrLwVmA.js";import{B as d}from"../main-Cuy6vPL_.js";import"./chunk-BOsc4ot2.js";import"./chunk-Sp7XtC9M.js";import"./chunk-PsGeISlR.js";import"./chunk-G4j39w-L.js";import"./chunk-C9IVZD6r.js";import"./chunk-Cvn0QpQj.js";const f=async a=>(await g.get(`/api/tickets?page=${a}`)).data,v=()=>{const[a,r]=m.useState(1),{data:n,isLoading:c,isError:l}=x({queryKey:["tickets",a],queryFn:()=>f(a),keepPreviousData:!0}),o=n?.data??[],t=n?.pagination;return e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{children:"Loading..."}):l?e.jsx("div",{children:"Error loading tickets."}):e.jsxs(e.Fragment,{children:[o.length===0?e.jsx("div",{children:"No tickets found."}):o.map(s=>e.jsxs(u,{className:"mb-2",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:s.title}),e.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:s.status})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["#",s.ticket_id," • ",s.priority," • ",s.ticketcategory?.name]})]}),e.jsxs(h,{children:[e.jsx("div",{children:s.message}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Created: ",new Date(s.created_at).toLocaleString()]})]})]},s.id)),t&&e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(d,{variant:"outline",size:"sm",disabled:t.current_page===1,onClick:()=>r(s=>s-1),children:"Previous"}),e.jsxs("span",{className:"self-center text-sm",children:["Page ",t.current_page," of ",t.last_page]}),e.jsx(d,{variant:"outline",size:"sm",disabled:t.current_page===t.last_page,onClick:()=>r(s=>s+1),children:"Next"})]})]})})},F=()=>(i.get("/api/motd"),i.get("/api/tickets"),i.get("/api/links"),e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-6xl font-bold px-2",children:"Tickets"}),e.jsx("p",{className:"px-4 mb-4",children:"Browse and Create Tickets"}),e.jsx(p,{}),e.jsx(v,{})]}));export{F as default};
