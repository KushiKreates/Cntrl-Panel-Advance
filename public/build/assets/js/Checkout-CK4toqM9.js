import{r as a,j as e,o as _,N as Y}from"./chunk-D2CLwLgv.js";import{H as P}from"./chunk-BJ65B6g6.js";import{C as x,b as f,c as g,a as p}from"./chunk-gkrLwVmA.js";import{c as I,s as J,T as K,h as Q,a as v,S as W,I as X,B as C,t as d}from"../main-Cuy6vPL_.js";import{L as ee}from"./chunk-Cun6v259.js";import{a as T,I as H,b as se}from"./chunk-C9IVZD6r.js";import{l as ae,m as w,n as re,I as te,T as k,G as S,o as ne,p as le,A as ce}from"./chunk-G4j39w-L.js";import"./chunk-BOsc4ot2.js";import"./chunk-CpaldM2f.js";import"./chunk-Sp7XtC9M.js";import"./chunk-PsGeISlR.js";import"./chunk-Cvn0QpQj.js";const R=a.forwardRef(({className:r,...i},t)=>e.jsx(T,{className:I("grid gap-2",r),...i,ref:t}));R.displayName=T.displayName;const D=a.forwardRef(({className:r,...i},t)=>e.jsx(H,{ref:t,className:I("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...i,children:e.jsx(se,{className:"flex items-center justify-center",children:e.jsx(ae,{className:"h-3.5 w-3.5 fill-primary"})})}));D.displayName=H.displayName;var oe=r=>e.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...r,children:[e.jsx("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:"currentColor"}),e.jsx("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:"currentColor"}),e.jsx("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:"currentColor"}),e.jsx("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:"currentColor"})]});function ie(){const[r,i]=a.useState("");a.useEffect(()=>{const s=window.location.pathname.split("/"),l=s[s.length-1];i(l)},[]);const[t,E]=a.useState(null),[M,$]=a.useState(!0),[A,F]=a.useState([]),[c,b]=a.useState(""),[o,L]=a.useState(""),[u,B]=a.useState(0),[n,G]=a.useState(!1),[m,N]=a.useState(0),[h,V]=a.useState({percent:0,value:0,formattedValue:""}),[y,Z]=a.useState({percent:0,value:0,formattedValue:""}),[z,O]=a.useState(!1);_(),a.useEffect(()=>{if(!r)return;const s=window.checkout,l=J.get("checkoutData");console.log("Hydrating checkout state with:",s,l),E(s.product),N(s.total),V(s.tax),Z(s.discount),O(s.isCouponsEnabled),F(l.paymentGateways),(l.productIsFree||s.isFree)&&b("free"),$(!1)},[r]);const j=(s,l=t?.currency||"EUR")=>new Intl.NumberFormat("en-US",{style:"currency",currency:l}).format(s),U=()=>{!o.trim()||!t||P.post("/api/coupons/redeem",{coupon:o,productId:r}).then(s=>{if(s.valid){const l=s.type==="percentage"?m*(1-s.value/100):m-s.value;B(m-l),N(l),G(!0),d.success("Coupon applied!")}else d.error("Invalid coupon.")}).catch(()=>d.error("Coupon check failed."))},q=()=>{if(!c){d.error("Please select a payment method.");return}d.custom(s=>e.jsxs("div",{className:`p-4 rounded-lg shadow-lg bg-white dark:bg-zinc-800 ${s.visible?"animate-enter":"animate-leave"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-6 w-6 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Redirecting to payment..."})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Please wait while we process your payment."})]})),Y({to:`/new/payment/pay?product_id=${r}&method=${c}&coupon=${n?o:""}`}),console.log(`/new/payment/pay?product_id=${r}&method=${c}&coupon=${n?o:""}`)};return M||!t?e.jsx("div",{className:"flex h-[70vh] items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(w,{className:"animate-pulse h-12 w-12 text-primary"}),e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Loading checkout information..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(K,{position:"top-center"}),e.jsx("div",{className:"container max-w-6xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-5",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(x,{className:"border border-border/40 ",children:[e.jsx(f,{className:"bg-gradient-to-r  border-b border-border/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-primary"}),e.jsx(g,{className:"text-xl",children:"Order Summary"})]})}),e.jsxs(p,{className:"pt-6 space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-muted/40",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),"Product Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Item"}),e.jsxs("span",{className:"font-medium",children:[t.quantity," ",t.type]})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-muted-foreground",children:"Description"}),e.jsx("span",{className:"text-sm max-w-[200px] text-right",children:t.description})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Unit Price"}),e.jsx("span",{children:t.formattedPrice})]})]})]}),e.jsx(Q,{className:"my-4"}),e.jsxs("div",{className:"space-y-3",children:[y.value>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(k,{className:"h-4 w-4"})," Discount"]}),e.jsx(v,{variant:"outline",className:"text-green-600 dark:text-green-500 bg-green-50/50 dark:bg-green-900/20 border-green-200 dark:border-green-900/50",children:y.formattedValue})]}),n&&u>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4"})," Coupon"]}),e.jsxs(v,{variant:"outline",className:"text-green-600 dark:text-green-500 bg-green-50/50 dark:bg-green-900/20 border-green-200 dark:border-green-900/50",children:["-",j(u)]})]}),h.value>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(ne,{className:"h-4 w-4"})," Tax (",h.percent,"%)"]}),e.jsx("span",{children:h.formattedValue})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Total"}),e.jsx("span",{className:"font-bold text-xl",children:j(m)})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground p-3 rounded-md border border-border/40 bg-background",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["This checkout is powered by ",e.jsx("a",{className:"font-bold font-jakarta",href:"https://ctrlpanel.gg",children:"Ctrl-Panel"})]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs(x,{className:"border border-border/40 ",children:[e.jsx(f,{className:"bg-gradient-to-r  border-b border-border/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-primary"}),e.jsx(g,{className:"text-xl",children:"Payment Method"})]})}),e.jsx(p,{className:"pt-6",children:e.jsx(W,{className:"max-h-[280px] pr-4",children:e.jsx(R,{value:c,onValueChange:b,className:"space-y-3",children:A.map(s=>e.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg border ${c===s.name?"border-primary bg-primary/5":"border-border/50 hover:border-border hover:bg-accent/50"} transition-all duration-200`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{value:s.name,id:s.name}),e.jsxs(ee,{htmlFor:s.name,className:"flex items-center space-x-3 cursor-pointer",children:[s.image&&e.jsx("div",{className:"w-10 h-7 flex items-center justify-center bg-white dark:bg-zinc-800 rounded-md border border-border/50 p-1",children:e.jsx("img",{src:s.image,alt:s.name,className:"h-5 max-w-[32px] object-contain"})}),e.jsx("span",{className:"font-medium",children:s.label||s.name})]})]})},s.name))})})})]}),z&&e.jsxs(x,{className:"border border-border/40 ",children:[e.jsx(f,{className:"bg-gradient-to-r  border-b border-border/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),e.jsx(g,{className:"text-xl",children:"Discount Code"})]})}),e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(X,{placeholder:"Enter promo code",value:o,onChange:s=>L(s.target.value),className:n?"border-green-500 focus-visible:ring-green-500":"",disabled:n})}),e.jsx(C,{onClick:U,disabled:n||!o,variant:n?"outline":"default",className:n?"border-green-500 text-green-600":"",children:n?"Applied âœ“":"Apply"})]}),n&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 p-3 rounded-md text-sm flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsxs("p",{children:["Discount of ",e.jsx("span",{className:"font-semibold",children:j(u)})," applied to your order!"]})]})]})})]}),e.jsx(x,{className:"border border-primary/20 bg-primary/5 dark:bg-primary/10",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(C,{onClick:q,size:"lg",className:"w-full text-base py-6 group",disabled:!c,children:e.jsxs("span",{className:"flex items-center gap-2",children:["Complete Payment",e.jsx(ce,{className:"h-5 w-5 group-hover:translate-x-1 transition-transform"})]})}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"By completing this purchase, you agree to our Terms of Service and Privacy Policy"})]})})})]})]})})]})}const ve=()=>(P.get("/api/motd"),e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-6xl mt-2 font-bold px-2",children:"Checkout"}),e.jsx("p",{className:"px-4 mb-4",children:"Complete Your Purchase Online."}),e.jsx(ie,{})]})}));export{ve as default};
